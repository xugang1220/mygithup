<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.yfyue.sysauth.db.inter.BjButtonMapper" >
  <resultMap id="BaseResultMap" type="cn.yfyue.sysauth.db.model.BjButton" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="BUTTON_ID" property="buttonId" jdbcType="BIGINT" />
    <result column="FUN_ID" property="funId" jdbcType="BIGINT" />
    <result column="BUTTON_HTML" property="buttonHtml" jdbcType="VARCHAR" />
    <result column="BUTTON_NAME" property="buttonName" jdbcType="CHAR" />
    <result column="REG_MAN" property="regMan" jdbcType="BIGINT" />
    <result column="REG_TIME" property="regTime" jdbcType="TIMESTAMP" />
  </resultMap>
<!-- 
//按功能ID清掉按钮
int delButtonForFuncId(String funcId);
 -->  
 <delete id="delButtonForFuncId">
    DELETE FROM BJ_BUTTON WHERE FUN_ID=#{funcId,jdbcType=BIGINT}
 </delete>
 <!-- 
 //取按钮列表
List<BjButton> getButtonList(String funcId);
-->
<select id="getButtonList"   resultMap="BaseResultMap">
  SELECT BUTTON_ID,FUN_ID,BUTTON_NAME,REG_TIME 
    FROM BJ_BUTTON WHERE FUN_ID=#{funId,jdbcType=BIGINT}
</select>
<!--
//添加
int addButton(BjButton bjButton );
-->
 <insert id="addButton" parameterType="cn.yfyue.sysauth.db.model.BjButton" >
    insert into BJ_BUTTON (FUN_ID, BUTTON_HTML, 
      BUTTON_NAME, REG_MAN, REG_TIME
      )
    values (#{funId,jdbcType=BIGINT}, #{buttonHtml,jdbcType=VARCHAR}, 
      #{buttonName,jdbcType=CHAR}, #{regMan,jdbcType=BIGINT}, NOW()
      )
  </insert>
<!--
//取单个
BjButton getButtonInfo(String buttonId);
-->
<select id="getButtonInfo"   resultMap="BaseResultMap">
  SELECT BUTTON_ID,BUTTON_HTML,BUTTON_NAME,FUN_ID
     FROM BJ_BUTTON WHERE BUTTON_ID=#{buttonId,jdbcType=BIGINT}
</select>
<!--
//修改
int upButton(BjButton bjButton);
-->
  <update id="upButton" parameterType="cn.yfyue.sysauth.db.model.BjButton" >
    update BJ_BUTTON
    <set >
      <if test="buttonHtml != null" >
        BUTTON_HTML = #{buttonHtml,jdbcType=VARCHAR},
      </if>
      <if test="buttonName != null" >
        BUTTON_NAME = #{buttonName,jdbcType=CHAR},
      </if>
      <if test="regMan != null" >
        REG_MAN = #{regMan,jdbcType=BIGINT},
      </if>
        REG_TIME =NOW(),
    </set>
    where BUTTON_ID = #{buttonId,jdbcType=BIGINT}
  </update>
<!--
//删除
int delButton(String buttonId); 
  --> 
 <delete id="delButton">
   DELETE FROM BJ_BUTTON WHERE BUTTON_ID=#{buttonId,jdbcType=BIGINT}
 </delete>

</mapper>